<!DOCTYPE html>
<html lang="en" class="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
    <title>Filament Manager</title>
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">

    <!-- Favicon -->
    <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='M21 12 L21 3.5' stroke='%23F97316'/%3E%3Cpath d='M21 3.5 L15 3.5' stroke='%23F97316'/%3E%3Cpath d='M21 12a9 9 0 1 1-6.219-8.56' stroke='%233B82F6'/%3E%3Ccircle cx='12' cy='12' r='2.5' fill='%231E40AF' stroke='none'/%3E%3C/svg%3E" />
    <link rel="apple-touch-icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 512 512'%3E%3Crect width='512' height='512' rx='128' fill='%230f172a'/%3E%3Cg transform='translate(56, 56) scale(16.6)'%3E%3Cpath d='M21 12 L21 3.5' fill='none' stroke='%23F97316' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M21 3.5 L15 3.5' fill='none' stroke='%23F97316' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M21 12a9 9 0 1 1-6.219-8.56' fill='none' stroke='%233B82F6' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3Ccircle cx='12' cy='12' r='2.5' fill='%233B82F6' stroke='none'/%3E%3C/g%3E%3C/svg%3E" />

    <meta name="theme-color" content="#0f172a" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              slate: {
                850: '#151e2e',
              }
            },
            animation: {
              'fade-in': 'fadeIn 0.3s ease-out',
              'slide-in-left': 'slideInLeft 0.3s ease-out',
            },
            keyframes: {
              fadeIn: {
                '0%': { opacity: '0', transform: 'translateY(10px)' },
                '100%': { opacity: '1', transform: 'translateY(0)' },
              },
              slideInLeft: {
                '0%': { transform: 'translateX(-100%)' },
                '100%': { transform: 'translateX(0)' },
              }
            }
          }
        }
      }
    </script>
    
    <!-- Crash Handler -->
    <script>
      window.addEventListener('error', function(event) {
        if (event.message === 'ResizeObserver loop limit exceeded') return;
        
        setTimeout(() => {
            const root = document.getElementById('root');
            if (root && root.innerHTML.trim() === '') {
                document.body.innerHTML = '<div style="padding:20px; color:white; background:#1e293b; font-family:sans-serif; height:100vh; display:flex; flex-direction:column; justify-content:center; align-items:center; text-align:center;">' +
                '<h1 style="font-size:24px; margin-bottom:10px;">Oops!</h1>' +
                '<p>The app could not load.</p>' +
                '<pre style="text-align:left; background:rgba(0,0,0,0.3); padding:10px; border-radius:8px; margin:20px 0; max-width:90%; overflow:auto;">' + (event.error ? event.error.message : event.message) + '</pre>' +
                '<button onclick="window.location.reload()" style="padding:12px 24px; background:#3b82f6; color:white; border:none; border-radius:8px; font-weight:bold; cursor:pointer;">Try Again</button>' +
                '</div>';
            }
        }, 1000);
      });
    </script>

    <style>
      ::-webkit-scrollbar { width: 8px; }
      ::-webkit-scrollbar-track { background: transparent; }
      ::-webkit-scrollbar-thumb { background: #475569; border-radius: 4px; }
      .dark ::-webkit-scrollbar-track { background: #1e293b; }
      
      body {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
        overscroll-behavior-y: contain;
      }

      @keyframes snowfall {
        0% { transform: translateY(-10px) translateX(0) rotate(0deg); opacity: 0; }
        20% { opacity: 0.8; }
        100% { transform: translateY(100vh) translateX(20px) rotate(360deg); opacity: 0; }
      }

      .snowflake {
        position: fixed;
        color: #fff;
        top: -20px;
        z-index: 9999;
        pointer-events: none;
        user-select: none;
        animation-name: snowfall;
        animation-timing-function: linear;
        animation-iteration-count: infinite;
        text-shadow: 0 0 5px rgba(255,255,255,0.8);
      }

      .snow-drift {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 12px;
        background: #ffffff;
        border-radius: 12px 12px 6px 6px;
        z-index: 5;
        opacity: 0.95;
        box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        pointer-events: none;
      }
      .snow-drift::before {
          content: '';
          position: absolute;
          top: 8px;
          left: 15%;
          width: 18px;
          height: 8px;
          background: #ffffff;
          border-radius: 0 0 10px 10px;
      }
      .snow-drift::after {
          content: '';
          position: absolute;
          top: 8px;
          right: 20%;
          width: 12px;
          height: 6px;
          background: #ffffff;
          border-radius: 0 0 10px 10px;
      }
    </style>
<script type="importmap">
{
  "imports": {
    "react": "https://esm.sh/react@^18.3.1",
    "react-dom": "https://esm.sh/react-dom@^18.3.1",
    "react-dom/": "https://esm.sh/react-dom@^18.3.1/",
    "react/": "https://esm.sh/react@^18.3.1/",
    "@google/genai": "https://esm.sh/@google/genai@^1.33.0",
    "recharts": "https://esm.sh/recharts@^2.15.0?external=react,react-dom",
    "lucide-react": "https://esm.sh/lucide-react@^0.560.0",
    "qrcode": "https://esm.sh/qrcode@^1.5.4",
    "html2canvas": "https://esm.sh/html2canvas@^1.4.1",
    "jspdf": "https://esm.sh/jspdf@^3.0.4",
    "@capacitor/camera": "https://esm.sh/@capacitor/camera@6.1.1",
    "@capacitor/core": "https://esm.sh/@capacitor/core@6.1.1",
    "@capacitor/share": "https://esm.sh/@capacitor/share@6.0.3",
    "@capacitor/filesystem": "https://esm.sh/@capacitor/filesystem@6.0.2",
    "@capacitor/app": "https://esm.sh/@capacitor/app@6.0.2",
    "@capacitor/cli": "https://esm.sh/@capacitor/cli@6.1.1",
    "vite": "https://esm.sh/vite@^7.2.7",
    "@vitejs/plugin-react": "https://esm.sh/@vitejs/plugin-react@^5.1.2",
    "@supabase/supabase-js": "https://esm.sh/@supabase/supabase-js@^2.43.4"
  }
}
</script>
</head>
  <body>
    <div id="root"></div>
    <script type="module" src="/index.tsx"></script>
  </body>
</html>