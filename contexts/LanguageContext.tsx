
import React, { createContext, useContext, useState, useEffect } from 'react';

type Language = 'nl' | 'en' | 'de' | 'fr' | 'es';

const translations: Record<Language, Record<string, string>> = {
  nl: {
    // Menu & Tabs
    dashboard: "Dashboard",
    inventory: "Voorraad",
    printHistory: "Logboek",
    printers: "Printers",
    shopping: "Inkooplijst",
    printPreview: "Print Preview",
    showcaseTitle: "Showcase",
    supportTitle: "Steun Project",
    settings: "Instellingen",
    admin: "Admin Dashboard",
    menu: "Menu",
    menuManagement: "Overzicht & Beheer",
    menuTools: "Tools",
    menuPremium: "Premium",
    becomePro: "Word PRO",
    userRatingText: "Gebruikers beoordelen ons met een",
    madeBy: "Gemaakt door",
    notifications: "Notificaties",
    
    // Settings Tabs
    tabGeneral: "Algemeen",
    tabNotifications: "Meldingen",
    tabManagement: "Beheer",
    tabAccount: "Account",
    tabPro: "PRO",

    // General Settings
    appearance: "Weergave",
    winterEdition: "Winter Editie",
    winterEditionDesc: "Sneeuweffecten op het dashboard inschakelen",
    language: "Taal",
    aboutApp: "Over de app",
    help: "Help & Contact",
    privacyPolicy: "Privacybeleid",
    donateButton: "Doneer een koffie",
    installApp: "Installeer App",
    installAppDesc: "Voeg toe aan je beginscherm voor de beste ervaring.",
    install: "Installeren",

    // Management
    locationManager: "Locaties",
    supplierManager: "Leveranciers",
    addLocation: "Locatie toevoegen",
    addSupplier: "Leverancier toevoegen",
    exampleLocation: "bv. Werkplaats Kast A",
    exampleSupplier: "bv. 123-3D",
    exampleWebsite: "bv. www.123-3d.nl",
    noLocations: "Geen locaties gevonden",
    noSuppliers: "Geen leveranciers gevonden",
    optional: "Optioneel",

    // Notifications Settings
    lowStockWarning: "Lage Voorraad Drempel",
    unusedWarning: "Ongebruikt Waarschuwing",
    days: "dagen",
    enableUpdateNotifications: "Meldingen over app-updates ontvangen",

    // Account & Data
    logout: "Uitloggen",
    tabData: "Data & Backup",
    backupCreate: "Export maken",
    backupRestore: "Import herstellen",
    confirmBackup: "Let op: Dit overschrijft je huidige lokale data. Doorgaan?",
    dangerZone: "Gevaarlijke Zone",
    deleteAccount: "Account Verwijderen",
    deleteAccountDesc: "Wil je stoppen? Je kunt hier een verzoek indienen om je account en alle data definitief te verwijderen.",
    cancelDeletion: "Verwijderverzoek Annuleren",
    confirmCancelDeletion: "Weet je zeker dat je het verwijderverzoek wilt intrekken?",
    requestSent: "Verwijderverzoek verzonden. Je data wordt binnen 48 uur gewist.",
    requestCancelled: "Verzoek geannuleerd.",

    // PRO Tools
    proTools: "PRO Calculator",
    proToolsDesc: "Stel hier je tarieven in voor nauwkeurige prijsberekeningen.",
    electricityRate: "Stroomtarief (€/kWh)",
    exampleElectricityRate: "bv. 0.35",
    hourlyRate: "Uurtarief (€/uur)",
    exampleHourlyRate: "bv. 2.50",
    profitMargin: "Winstmarge (%)",
    roundToNine: "Afronden op .x9",
    proFeatureLocked: "PRO Functie",
    upgradeToUnlock: "Upgrade om te ontgrendelen",

    // Dashboard Tiles
    totalSpools: "Totaal Spoelen",
    totalWeight: "Totaal Gewicht",
    totalValue: "Totale Waarde",
    lowStock: "Lage Voorraad",
    materialDistribution: "Materiaal Verdeling",
    lowestStock: "Laagste Voorraad",
    investmentBrand: "Investering per Merk",
    successRate: "Succes Ratio",
    items: "items",
    noData: "Geen data beschikbaar",
    filament: "Filament",
    materials: "Materialen",

    // Print Preview Page
    dropGcode: "Sleep je G-code hierheen",
    autoCalculatedDesc: "Voorraad en AMS slots worden automatisch gecontroleerd.",
    configuration: "Configuratie",
    printQuantity: "Aantal afdrukken",
    selectPrinterFirst: "Selecteer eerst een printer...",
    waitingForPrinter: "Wachten op printer",
    waitingForPrinterDesc: "Kies een printer om de AMS status te controleren.",
    readyToPrint: "Klaar voor print!",
    notReadyToPrint: "Niet klaar",
    checkAlertsBelow: "Controleer de meldingen hieronder.",
    checkStock: "Voorraad controle",
    totalRequired: "Totaal nodig",
    perfectMatch: "Perfecte match",
    noMatchingSpool: "Geen passende spoel gevonden",
    inStock: "Op voorraad",
    insufficientStock: "Onvoldoende voorraad",
    proposedSlot: "Voorgesteld slot",
    slot: "Slot",
    loadFromStock: "Laden uit voorraad",
    notInAms: "Niet in AMS gevonden",
    
    // Actions & Common
    save: "Opslaan",
    cancel: "Annuleren",
    delete: "Verwijder",
    edit: "Bewerk",
    close: "Sluiten",
    back: "Terug",
    success: "Gelukt",
    failed: "Mislukt",
    loading: "Laden...",
    confirmDelete: "Weet je zeker dat je dit wilt verwijderen?",

    // Notifications Page
    notificationsSubtitle: "Blijf op de hoogte van nieuwe functies en updates.",
    noNotifications: "Geen nieuwe meldingen",
    allCaughtUp: "Je bent helemaal bij!",
    newUpdate: "Nieuwe Update!",
    versionActive: "Versie %v is nu actief",
    installed: "Geïnstalleerd",
    whatsNew: "Wat is er nieuw",
    autoUpdateMsg: "De app is automatisch bijgewerkt naar de hoogste versie.",
    publishedOn: "Gepubliceerd op",
    security: "Veiligheid",
    securityDesc: "Updates bevatten vaak belangrijke beveiligingsverbeteringen.",
    speed: "Snelheid",
    speedDesc: "We optimaliseren de app constant voor een snellere ervaring."
  },
  en: {
    dashboard: "Dashboard",
    inventory: "Inventory",
    printHistory: "Print History",
    printers: "Printers",
    shopping: "Shopping List",
    printPreview: "Print Preview",
    showcaseTitle: "Showcase",
    supportTitle: "Support Project",
    settings: "Settings",
    admin: "Admin Panel",
    menu: "Menu",
    menuManagement: "Management",
    menuTools: "Tools",
    menuPremium: "Premium",
    becomePro: "Become PRO",
    userRatingText: "Users rate us with a",
    madeBy: "Made by",
    notifications: "Notifications",

    tabGeneral: "General",
    tabNotifications: "Notifications",
    tabManagement: "Management",
    tabAccount: "Account",
    tabPro: "PRO",

    appearance: "Appearance",
    winterEdition: "Winter Edition",
    winterEditionDesc: "Enable snow effects on the dashboard",
    language: "Language",
    aboutApp: "About the app",
    help: "Help & Contact",
    privacyPolicy: "Privacy Policy",
    donateButton: "Buy me a coffee",
    installApp: "Install App",
    installAppDesc: "Add to your home screen for the best experience.",
    install: "Install",

    locationManager: "Locations",
    supplierManager: "Suppliers",
    addLocation: "Add Location",
    addSupplier: "Add Supplier",
    exampleLocation: "e.g. Workshop Cabinet A",
    exampleSupplier: "e.g. Amazon",
    exampleWebsite: "e.g. www.amazon.com",
    noLocations: "No locations found",
    noSuppliers: "No suppliers found",
    optional: "Optional",

    lowStockWarning: "Low Stock Threshold",
    unusedWarning: "Unused Warning",
    days: "days",
    enableUpdateNotifications: "Receive app update notifications",

    logout: "Logout",
    tabData: "Data & Backup",
    backupCreate: "Create Export",
    backupRestore: "Restore Import",
    confirmBackup: "Note: This will overwrite current local data. Continue?",
    dangerZone: "Danger Zone",
    deleteAccount: "Delete Account",
    deleteAccountDesc: "Want to leave? You can request to permanently delete your account and all data here.",
    cancelDeletion: "Cancel Deletion Request",
    confirmCancelDeletion: "Are you sure you want to cancel the deletion request?",
    requestSent: "Deletion request sent. Your data will be cleared within 48 hours.",
    requestCancelled: "Request cancelled.",

    proTools: "PRO Calculator",
    proToolsDesc: "Set your rates here for accurate price calculations.",
    electricityRate: "Electricity Rate ($/kWh)",
    exampleElectricityRate: "e.g. 0.35",
    hourlyRate: "Hourly Rate ($/hr)",
    exampleHourlyRate: "e.g. 2.50",
    profitMargin: "Profit Margin (%)",
    roundToNine: "Round to .x9",
    proFeatureLocked: "PRO Feature",
    upgradeToUnlock: "Upgrade to unlock",
    
    totalSpools: "Total Spools",
    totalWeight: "Total Weight",
    totalValue: "Total Value",
    lowStock: "Low Stock",
    materialDistribution: "Material Distribution",
    lowestStock: "Lowest Stock",
    investmentBrand: "Investment per Brand",
    successRate: "Success Rate",
    items: "items",
    noData: "No data available",
    filament: "Filament",
    materials: "Materials",

    dropGcode: "Drop your G-code here",
    autoCalculatedDesc: "Stock and AMS slots will be checked automatically.",
    configuration: "Configuration",
    printQuantity: "Print Quantity",
    selectPrinterFirst: "Select a printer first...",
    waitingForPrinter: "Waiting for printer",
    waitingForPrinterDesc: "Choose a printer to check AMS status.",
    readyToPrint: "Ready to print!",
    notReadyToPrint: "Not ready",
    checkAlertsBelow: "Please check the alerts below.",
    checkStock: "Stock Check",
    totalRequired: "Total required",
    perfectMatch: "Perfect match",
    noMatchingSpool: "No matching spool found",
    inStock: "In stock",
    insufficientStock: "Insufficient stock",
    proposedSlot: "Proposed slot",
    slot: "Slot",
    loadFromStock: "Load from stock",
    notInAms: "Not found in AMS",

    save: "Save",
    cancel: "Cancel",
    delete: "Delete",
    edit: "Edit",
    close: "Close",
    back: "Back",
    success: "Success",
    failed: "Failed",
    loading: "Loading...",
    confirmDelete: "Are you sure you want to delete this?",
    notificationsSubtitle: "Stay updated with new features and improvements.",
    noNotifications: "No new notifications",
    allCaughtUp: "You're all caught up!",
    newUpdate: "New Update!",
    versionActive: "Version %v is now active",
    installed: "Installed",
    whatsNew: "What's New",
    autoUpdateMsg: "The app has been automatically updated to the latest version.",
    publishedOn: "Published on",
    security: "Security",
    securityDesc: "Updates often include important security enhancements.",
    speed: "Performance",
    speedDesc: "We constantly optimize the app for a faster experience."
  },
  de: {
    dashboard: "Dashboard",
    inventory: "Inventar",
    printHistory: "Logbuch",
    printers: "Drucker",
    shopping: "Einkaufsliste",
    printPreview: "Druckvorschau",
    showcaseTitle: "Schaukasten",
    supportTitle: "Projekt unterstützen",
    settings: "Einstellungen",
    admin: "Admin-Bereich",
    menu: "Menü",
    menuManagement: "Verwaltung",
    menuTools: "Werkzeuge",
    menuPremium: "Premium",
    becomePro: "PRO werden",
    userRatingText: "Nutzer bewerten uns mit",
    madeBy: "Erstellt von",
    notifications: "Benachrichtigungen",

    tabGeneral: "Allgemein",
    tabNotifications: "Meldungen",
    tabManagement: "Verwaltung",
    tabAccount: "Konto",
    tabPro: "PRO",

    appearance: "Aussehen",
    winterEdition: "Winter-Edition",
    winterEditionDesc: "Schneeeffekte auf dem Dashboard aktivieren",
    language: "Sprache",
    aboutApp: "Über die App",
    help: "Hilfe & Kontakt",
    privacyPolicy: "Datenschutz",
    donateButton: "Kaffee spendieren",
    installApp: "App installieren",
    installAppDesc: "Zum Startbildschirm hinzufügen für das beste Erlebnis.",
    install: "Installieren",

    locationManager: "Standorte",
    supplierManager: "Lieferanten",
    addLocation: "Standort hinzufügen",
    addSupplier: "Lieferant hinzufügen",
    exampleLocation: "z.B. Werkstattschrank A",
    exampleSupplier: "z.B. Prusa",
    exampleWebsite: "z.B. www.prusa3d.com",
    noLocations: "Keine Standorte gefunden",
    noSuppliers: "Keine Lieferanten gefunden",
    optional: "Optional",

    lowStockWarning: "Bestandswarnung",
    unusedWarning: "Inaktivitätswarnung",
    days: "Tage",
    enableUpdateNotifications: "Update-Benachrichtigungen erhalten",

    logout: "Abmelden",
    tabData: "Daten & Backup",
    backupCreate: "Export erstellen",
    backupRestore: "Import wiederherstellen",
    confirmBackup: "Hinweis: Aktuelle lokale Daten werden überschrieben. Fortfahren?",
    dangerZone: "Gefahrenzone",
    deleteAccount: "Konto löschen",
    deleteAccountDesc: "Möchten Sie gehen? Hier können Sie die Löschung Ihres Kontos und aller Daten beantragen.",
    cancelDeletion: "Löschantrag abbrechen",
    confirmCancelDeletion: "Sind Sie sicher, dass Sie den Löschantrag abbrechen möchten?",
    requestSent: "Löschantrag gesendet. Ihre Daten werden innerhalb von 48 Stunden gelöscht.",
    requestCancelled: "Anfrage abgebrochen.",

    proTools: "PRO Rechner",
    proToolsDesc: "Stellen Sie hier Ihre Sätze für genaue Preisberechnungen ein.",
    electricityRate: "Strompreis (€/kWh)",
    exampleElectricityRate: "z.B. 0.35",
    hourlyRate: "Stundensatz (€/Std)",
    exampleHourlyRate: "z.B. 2.50",
    profitMargin: "Gewinnspanne (%)",
    roundToNine: "Auf .x9 aufrunden",
    proFeatureLocked: "PRO Funktion",
    upgradeToUnlock: "Upgrade zum Freischalten",
    
    totalSpools: "Gesamtspulen",
    totalWeight: "Gesamtgewicht",
    totalValue: "Gesamtwert",
    lowStock: "Niedriger Bestand",
    materialDistribution: "Materialverteilung",
    lowestStock: "Niedrigster Bestand",
    investmentBrand: "Investition pro Marke",
    successRate: "Erfolgsquote",
    items: "Artikel",
    noData: "Keine Daten verfügbar",
    filament: "Filament",
    materials: "Materialien",

    dropGcode: "G-Code Datei hierher ziehen",
    autoCalculatedDesc: "Bestand und AMS-Steckplätze werden automatisch geprüft.",
    configuration: "Konfiguration",
    printQuantity: "Anzahl Drucke",
    selectPrinterFirst: "Zuerst Drucker auswählen...",
    waitingForPrinter: "Warten auf Drucker",
    waitingForPrinterDesc: "Wählen Sie einen Drucker, um den AMS-Status zu prüfen.",
    readyToPrint: "Druckbereit!",
    notReadyToPrint: "Nicht bereit",
    checkAlertsBelow: "Bitte prüfen Sie die Warnungen unten.",
    checkStock: "Bestandsprüfung",
    totalRequired: "Gesamtbedarf",
    perfectMatch: "Perfektes Match",
    noMatchingSpool: "Keine passende Spule gefunden",
    inStock: "Auf Lager",
    insufficientStock: "Unzureichender Bestand",
    proposedSlot: "Vorgeschlagener Slot",
    slot: "Slot",
    loadFromStock: "Vom Lager laden",
    notInAms: "Nicht im AMS gefunden",

    save: "Speichern",
    cancel: "Abbrechen",
    delete: "Löschen",
    edit: "Bearbeiten",
    close: "Schließen",
    back: "Zurück",
    success: "Erfolgreich",
    failed: "Fehlgeschlagen",
    loading: "Laden...",
    confirmDelete: "Sind Sie sicher, dass Sie dies löschen möchten?",
    notificationsSubtitle: "Bleiben Sie over neue Funktionen und Verbesserungen auf dem Laufenden.",
    noNotifications: "Keine neuen Benachrichtigungen",
    allCaughtUp: "Alles ist auf dem neuesten Stand!",
    newUpdate: "Neues Update!",
    versionActive: "Version %v ist jetzt aktiv",
    installed: "Installiert",
    whatsNew: "Was ist neu",
    autoUpdateMsg: "Die app wurde automatisch aktualisiert.",
    publishedOn: "Veröffentlicht am",
    security: "Sicherheit",
    securityDesc: "Updates enthalten oft wichtige Sicherheitsverbesserungen.",
    speed: "Leistung",
    speedDesc: "Wir optimieren die App ständig."
  },
  fr: {
    dashboard: "Tableau de bord",
    inventory: "Inventaire",
    printHistory: "Historique",
    printers: "Imprimantes",
    shopping: "Liste d'achats",
    printPreview: "Aperçu",
    showcaseTitle: "Vitrine",
    supportTitle: "Soutenir le projet",
    settings: "Paramètres",
    admin: "Admin",
    menu: "Menu",
    menuManagement: "Gestion",
    menuTools: "Outils",
    menuPremium: "Premium",
    becomePro: "Devenir PRO",
    userRatingText: "Les utilisateurs nous notent",
    madeBy: "Fait par",
    notifications: "Notifications",

    tabGeneral: "Général",
    tabNotifications: "Notifications",
    tabManagement: "Gestion",
    tabAccount: "Compte",
    tabPro: "PRO",

    appearance: "Apparence",
    winterEdition: "Édition d'hiver",
    winterEditionDesc: "Activer les effets de neige sur le tableau de bord",
    language: "Langue",
    aboutApp: "À propos",
    help: "Aide & Contact",
    privacyPolicy: "Confidentialité",
    donateButton: "Offrez-moi un café",
    installApp: "Installer l'app",
    installAppDesc: "Ajouter à l'écran d'accueil pour une meilleure expérience.",
    install: "Installer",

    locationManager: "Emplacements",
    supplierManager: "Fournisseurs",
    addLocation: "Ajouter emplacement",
    addSupplier: "Ajouter fournisseur",
    exampleLocation: "ex: Armoire A",
    exampleSupplier: "ex: Creality",
    exampleWebsite: "ex: www.creality.com",
    noLocations: "Aucun emplacement trouvé",
    noSuppliers: "Aucun fournisseur trouvé",
    optional: "Optionnel",

    lowStockWarning: "Seuil de stock bas",
    unusedWarning: "Alerte d'inutilisation",
    days: "jours",
    enableUpdateNotifications: "Recevoir les notifications de mise à jour",

    logout: "Déconnexion",
    tabData: "Données & Sauvegarde",
    backupCreate: "Exporter les données",
    backupRestore: "Importer les données",
    confirmBackup: "Note : Ceci écrasera les données locales. Continuer ?",
    dangerZone: "Zone de danger",
    deleteAccount: "Supprimer le compte",
    deleteAccountDesc: "Vous voulez nous quitter ? Vous pouvez demander la suppression définitive de votre compte ici.",
    cancelDeletion: "Annuler la demande de suppression",
    confirmCancelDeletion: "Voulez-vous vraiment annuler la demande de suppression ?",
    requestSent: "Demande de suppression envoyée. Vos données seront effacées sous 48h.",
    requestCancelled: "Demande annulée.",

    proTools: "Calculatrice PRO",
    proToolsDesc: "Réglez vos tarifs ici pour des calculs de prix précis.",
    electricityRate: "Tarif d'électricité (€/kWh)",
    exampleElectricityRate: "ex: 0.35",
    hourlyRate: "Tarif horaire (€/h)",
    exampleHourlyRate: "ex: 2.50",
    profitMargin: "Marge bénéficiaire (%)",
    roundToNine: "Arrondir à .x9",
    proFeatureLocked: "Fonction PRO",
    upgradeToUnlock: "Mettre à jour pour débloquer",
    
    totalSpools: "Total Bobines",
    totalWeight: "Poids Total",
    totalValue: "Valeur Totale",
    lowStock: "Stock Faible",
    materialDistribution: "Distribution des Matériaux",
    lowestStock: "Stock le plus bas",
    investmentBrand: "Investissement par Marque",
    successRate: "Taux de Réussite",
    items: "articles",
    noData: "Aucune donnée disponible",
    filament: "Filament",
    materials: "Matériaux",

    dropGcode: "Déposez votre fichier G-code ici",
    autoCalculatedDesc: "Le stock et les emplacements AMS seront vérifiés automatiquement.",
    configuration: "Configuration",
    printQuantity: "Quantité d'impressions",
    selectPrinterFirst: "Sélectionnez une imprimante d'abord...",
    waitingForPrinter: "En attente d'imprimante",
    waitingForPrinterDesc: "Choisissez une imprimante pour vérifier l'état de l'AMS.",
    readyToPrint: "Prêt à imprimer !",
    notReadyToPrint: "Pas prêt",
    checkAlertsBelow: "Veuillez vérifier les alertes ci-dessous.",
    checkStock: "Contrôle du stock",
    totalRequired: "Total requis",
    perfectMatch: "Correspondance parfaite",
    noMatchingSpool: "Aucune bobine correspondante trouvée",
    inStock: "En stock",
    insufficientStock: "Stock insuffisant",
    proposedSlot: "Emplacement proposé",
    slot: "Slot",
    loadFromStock: "Charger depuis le stock",
    notInAms: "Non trouvé dans l'AMS",

    save: "Enregistrer",
    cancel: "Annuler",
    delete: "Supprimer",
    edit: "Modifier",
    close: "Fermer",
    back: "Retour",
    success: "Succès",
    failed: "Échec",
    loading: "Chargement...",
    confirmDelete: "Êtes-vous sûr de vouloir supprimer ceci?",
    notificationsSubtitle: "Restez au courant des nouvelles fonctionnalités.",
    noNotifications: "Pas de nouvelles notifications",
    allCaughtUp: "Vous êtes à jour !",
    newUpdate: "Nouvelle mise à jour !",
    versionActive: "La version %v est maintenant active",
    installed: "Installé",
    whatsNew: "Quoi de neuf",
    autoUpdateMsg: "L'application a été automatiquement mise à jour.",
    publishedOn: "Publié le",
    security: "Sécurité",
    securityDesc: "Les mises à jour incluent des améliorations de sécurité.",
    speed: "Performance",
    speedDesc: "Nous optimisons constamment l'application."
  },
  es: {
    dashboard: "Panel",
    inventory: "Inventario",
    printHistory: "Historial",
    printers: "Impresoras",
    shopping: "Lista de compras",
    printPreview: "Vista previa",
    showcaseTitle: "Vitrina",
    supportTitle: "Apoyar proyecto",
    settings: "Ajustes",
    admin: "Admin",
    menu: "Menú",
    menuManagement: "Gestión",
    menuTools: "Herramientas",
    menuPremium: "Premium",
    becomePro: "Hacerse PRO",
    userRatingText: "Los usuarios nos califican con",
    madeBy: "Hecho por",
    notifications: "Notificaciones",

    tabGeneral: "General",
    tabNotifications: "Notificaciones",
    tabManagement: "Gestión",
    tabAccount: "Cuenta",
    tabPro: "PRO",

    appearance: "Apariencia",
    winterEdition: "Edición de invierno",
    winterEditionDesc: "Activar efectos de nieve en el panel",
    language: "Idioma",
    aboutApp: "Sobre la app",
    help: "Ayuda y Contacto",
    privacyPolicy: "Privacidad",
    donateButton: "Invítame a un café",
    installApp: "Instalar App",
    installAppDesc: "Añadir a la pantalla de inicio para una mejor experiencia.",
    install: "Instalar",

    locationManager: "Ubicaciones",
    supplierManager: "Proveedores",
    addLocation: "Añadir ubicación",
    addSupplier: "Añadir proveedor",
    exampleLocation: "ej: Armario Taller A",
    exampleSupplier: "ej: Bambu Lab",
    exampleWebsite: "ej: www.bambulab.com",
    noLocations: "No hay ubicaciones",
    noSuppliers: "No hay proveedores",
    optional: "Opcional",

    lowStockWarning: "Umbral de stock bajo",
    unusedWarning: "Aviso de inactividad",
    days: "días",
    enableUpdateNotifications: "Recibir notificaciones de actualizaciones",

    logout: "Cerrar sesión",
    tabData: "Datos y Backup",
    backupCreate: "Exportar datos",
    backupRestore: "Importar datos",
    confirmBackup: "Nota: Se sobrescribirán los datos locales. ¿Continuar?",
    dangerZone: "Zona de peligro",
    deleteAccount: "Eliminar cuenta",
    deleteAccountDesc: "¿Quieres irte? Puedes solicitar la eliminación definitiva de tu cuenta aquí.",
    cancelDeletion: "Cancelar solicitud de eliminación",
    confirmCancelDeletion: "¿Estás seguro de que quieres cancelar la solicitud de eliminación?",
    requestSent: "Solicitud enviada. Tus datos se borrarán en 48 horas.",
    requestCancelled: "Solicitud cancelada.",

    proTools: "Calculadora PRO",
    proToolsDesc: "Configura tus tarifas para cálculos de precios precisos.",
    electricityRate: "Tarifa eléctrica (€/kWh)",
    exampleElectricityRate: "ej: 0.35",
    hourlyRate: "Tarifa por hora (€/h)",
    exampleHourlyRate: "ej: 2.50",
    profitMargin: "Margen de beneficio (%)",
    roundToNine: "Redondear a .x9",
    proFeatureLocked: "Función PRO",
    upgradeToUnlock: "Actualizar para desbloquear",
    
    totalSpools: "Total Bobinas",
    totalWeight: "Peso Total",
    totalValue: "Valor Total",
    lowStock: "Stock Bajo",
    materialDistribution: "Distribución de Materiales",
    lowestStock: "Stock más bajo",
    investmentBrand: "Inversión por Marca",
    successRate: "Tasa de Éxito",
    items: "artículos",
    noData: "No hay datos disponibles",
    filament: "Filamento",
    materials: "Materiales",

    dropGcode: "Suelta tu archivo G-code aquí",
    autoCalculatedDesc: "El stock y los slots de AMS se verificarán automáticamente.",
    configuration: "Configuración",
    printQuantity: "Cantidad de impresiones",
    selectPrinterFirst: "Selecciona una impresora primero...",
    waitingForPrinter: "Esperando impresora",
    waitingForPrinterDesc: "Elige una impresora para verificar el estado de AMS.",
    readyToPrint: "¡Listo para imprimir!",
    notReadyToPrint: "No listo",
    checkAlertsBelow: "Por favor, revisa las alertas de abajo.",
    checkStock: "Control de stock",
    totalRequired: "Total requerido",
    perfectMatch: "Coincidencia perfecta",
    noMatchingSpool: "No se encontró bobina coincidente",
    inStock: "En stock",
    insufficientStock: "Stock insuficiente",
    proposedSlot: "Slot propuesto",
    slot: "Slot",
    loadFromStock: "Cargar desde el stock",
    notInAms: "No encontrado en AMS",

    save: "Guardar",
    cancel: "Cancelar",
    delete: "Eliminar",
    edit: "Editar",
    close: "Cerrar",
    back: "Volver",
    success: "Éxito",
    failed: "Error",
    loading: "Cargando...",
    confirmDelete: "¿Estás seguro de que quieres eliminar esto?",
    notificationsSubtitle: "Mantente al día con las nuevas funciones.",
    noNotifications: "No hay notificaciones nuevas",
    allCaughtUp: "¡Estás al día!",
    newUpdate: "¡Nueva actualización!",
    versionActive: "La versión %v ya está activa",
    installed: "Instalado",
    whatsNew: "Novedades",
    autoUpdateMsg: "La aplicación se ha actualizado automáticamente.",
    publishedOn: "Publicado el",
    security: "Seguridad",
    securityDesc: "Las actualizaciones incluyen mejoras de seguridad.",
    speed: "Rendimiento",
    speedDesc: "Optimizamos constantemente la aplicación."
  }
};

interface LanguageContextType {
  language: Language;
  setLanguage: (lang: Language) => void;
  t: (key: string) => string;
  tColor: (color: string) => string;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

export const LanguageProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {
  const [language, setLanguage] = useState<Language>(() => {
    return (localStorage.getItem('app_language') as Language) || 'nl';
  });

  useEffect(() => {
    localStorage.setItem('app_language', language);
    document.documentElement.lang = language;
  }, [language]);

  const t = (key: string): string => {
    if (!key) return '';
    return translations[language][key] || translations['en'][key] || key;
  };

  const tColor = (color: string): string => {
    if (!color) return '';
    const lowerColor = color.toLowerCase();
    return translations[language][lowerColor] || translations['en'][lowerColor] || color;
  };

  return (
    <LanguageContext.Provider value={{ language, setLanguage, t, tColor }}>
      {children}
    </LanguageContext.Provider>
  );
};

export const useLanguage = () => {
  const context = useContext(LanguageContext);
  if (!context) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
};
